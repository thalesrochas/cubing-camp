-- MySQL Script generated by MySQL Workbench
-- Wed Apr 29 12:20:10 2020
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema cubing-comp
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `cubing-comp` ;

-- -----------------------------------------------------
-- Schema cubing-comp
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `cubing-comp` DEFAULT CHARACTER SET utf8 ;
USE `cubing-comp` ;

-- -----------------------------------------------------
-- Table `campeonato`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `campeonato` ;

CREATE TABLE IF NOT EXISTS `campeonato` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL,
  `data_inicio` DATETIME NOT NULL,
  `data_termino` DATETIME NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_campeonato_UNIQUE` (`id` ASC) VISIBLE,
  UNIQUE INDEX `nome_UNIQUE` (`nome` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `competidor`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `competidor` ;

CREATE TABLE IF NOT EXISTS `competidor` (
  `id` INT NOT NULL,
  `nome` VARCHAR(45) NOT NULL,
  `nascimento` DATE NOT NULL,
  `wca_id` CHAR(10) NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_competidor_UNIQUE` (`id` ASC) VISIBLE,
  UNIQUE INDEX `nome_UNIQUE` (`nome` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `categoria`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `categoria` ;

CREATE TABLE IF NOT EXISTS `categoria` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_categorias_UNIQUE` (`id` ASC) VISIBLE,
  UNIQUE INDEX `nome_UNIQUE` (`nome` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `categorias_campeonato`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `categorias_campeonato` ;

CREATE TABLE IF NOT EXISTS `categorias_campeonato` (
  `id_campeonato` INT NOT NULL,
  `id_categoria` INT NOT NULL,
  `formato` ENUM("ao5", "bo3", "bo5", "mo3") NOT NULL,
  `qtd_rounds` INT NOT NULL,
  PRIMARY KEY (`id_campeonato`, `id_categoria`),
  INDEX `fk_categoria_has_campeonato_campeonato1_idx` (`id_campeonato` ASC) VISIBLE,
  INDEX `fk_categoria_has_campeonato_categoria1_idx` (`id_categoria` ASC) VISIBLE,
  CONSTRAINT `fk_categoria_has_campeonato_categoria1`
    FOREIGN KEY (`id_categoria`)
    REFERENCES `categoria` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_categoria_has_campeonato_campeonato1`
    FOREIGN KEY (`id_campeonato`)
    REFERENCES `campeonato` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `round`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `round` ;

CREATE TABLE IF NOT EXISTS `round` (
  `id_campeonato` INT NOT NULL,
  `id_categoria` INT NOT NULL,
  `id_competidor` INT NOT NULL,
  `num_round` INT NOT NULL,
  `tempo1` TIME(2) NULL,
  `tempo2` TIME(2) NULL,
  `tempo3` TIME(2) NULL,
  `tempo4` TIME(2) NULL,
  `tempo5` TIME(2) NULL,
  `media` TIME(2) NULL,
  `melhor` TIME(2) NULL,
  PRIMARY KEY (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`),
  INDEX `fk_round_competidor1_idx` (`id_competidor` ASC) VISIBLE,
  INDEX `fk_round_categoria_has_campeonato1_idx` (`id_categoria` ASC, `id_campeonato` ASC) VISIBLE,
  CONSTRAINT `fk_round_competidor1`
    FOREIGN KEY (`id_competidor`)
    REFERENCES `competidor` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_round_categoria_has_campeonato1`
    FOREIGN KEY (`id_categoria` , `id_campeonato`)
    REFERENCES `categorias_campeonato` (`id_categoria` , `id_campeonato`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Data for table `campeonato`
-- -----------------------------------------------------
START TRANSACTION;
USE `cubing-comp`;
INSERT INTO `campeonato` (`id`, `nome`, `data_inicio`, `data_termino`) VALUES (1, 'Bissexto 2020', '2020-02-29 08:00:00', '2020-02-29 18:00:00');
INSERT INTO `campeonato` (`id`, `nome`, `data_inicio`, `data_termino`) VALUES (2, '3-Regular 2020', '2020-01-11 08:45:00', '2020-01-11 17:50:00');

COMMIT;


-- -----------------------------------------------------
-- Data for table `competidor`
-- -----------------------------------------------------
START TRANSACTION;
USE `cubing-comp`;
INSERT INTO `competidor` (`id`, `nome`, `nascimento`, `wca_id`) VALUES (1, 'Francisco Thales Rocha Sousa', '1997-07-18', '2013SOUS03');
INSERT INTO `competidor` (`id`, `nome`, `nascimento`, `wca_id`) VALUES (2, 'Jo√£o Marcos Rocha Souza', '2001-11-12', '2013SOUS04');

COMMIT;


-- -----------------------------------------------------
-- Data for table `categoria`
-- -----------------------------------------------------
START TRANSACTION;
USE `cubing-comp`;
INSERT INTO `categoria` (`id`, `nome`) VALUES (1, 'sq1');
INSERT INTO `categoria` (`id`, `nome`) VALUES (2, '222');
INSERT INTO `categoria` (`id`, `nome`) VALUES (3, '333');
INSERT INTO `categoria` (`id`, `nome`) VALUES (4, '444');
INSERT INTO `categoria` (`id`, `nome`) VALUES (5, '555');
INSERT INTO `categoria` (`id`, `nome`) VALUES (6, '666');
INSERT INTO `categoria` (`id`, `nome`) VALUES (7, '777');
INSERT INTO `categoria` (`id`, `nome`) VALUES (8, 'minx');
INSERT INTO `categoria` (`id`, `nome`) VALUES (9, 'pyram');
INSERT INTO `categoria` (`id`, `nome`) VALUES (10, 'skewb');
INSERT INTO `categoria` (`id`, `nome`) VALUES (11, '333oh');
INSERT INTO `categoria` (`id`, `nome`) VALUES (12, '333ft');
INSERT INTO `categoria` (`id`, `nome`) VALUES (13, '333bf');
INSERT INTO `categoria` (`id`, `nome`) VALUES (14, '444bf');
INSERT INTO `categoria` (`id`, `nome`) VALUES (15, '555bf');
INSERT INTO `categoria` (`id`, `nome`) VALUES (16, '333fm');
INSERT INTO `categoria` (`id`, `nome`) VALUES (17, 'clock');
INSERT INTO `categoria` (`id`, `nome`) VALUES (18, '333mf');
INSERT INTO `categoria` (`id`, `nome`) VALUES (19, 'magic');
INSERT INTO `categoria` (`id`, `nome`) VALUES (20, 'mmagic');

COMMIT;


-- -----------------------------------------------------
-- Data for table `categorias_campeonato`
-- -----------------------------------------------------
START TRANSACTION;
USE `cubing-comp`;
INSERT INTO `categorias_campeonato` (`id_campeonato`, `id_categoria`, `formato`, `qtd_rounds`) VALUES (1, 3, 'ao5', 3);
INSERT INTO `categorias_campeonato` (`id_campeonato`, `id_categoria`, `formato`, `qtd_rounds`) VALUES (1, 2, 'ao5', 2);
INSERT INTO `categorias_campeonato` (`id_campeonato`, `id_categoria`, `formato`, `qtd_rounds`) VALUES (1, 4, 'ao5', 1);
INSERT INTO `categorias_campeonato` (`id_campeonato`, `id_categoria`, `formato`, `qtd_rounds`) VALUES (1, 5, 'ao5', 1);
INSERT INTO `categorias_campeonato` (`id_campeonato`, `id_categoria`, `formato`, `qtd_rounds`) VALUES (1, 13, 'bo3', 1);
INSERT INTO `categorias_campeonato` (`id_campeonato`, `id_categoria`, `formato`, `qtd_rounds`) VALUES (1, 8, 'ao5', 1);
INSERT INTO `categorias_campeonato` (`id_campeonato`, `id_categoria`, `formato`, `qtd_rounds`) VALUES (1, 9, 'ao5', 1);
INSERT INTO `categorias_campeonato` (`id_campeonato`, `id_categoria`, `formato`, `qtd_rounds`) VALUES (1, 10, 'ao5', 1);
INSERT INTO `categorias_campeonato` (`id_campeonato`, `id_categoria`, `formato`, `qtd_rounds`) VALUES (1, 1, 'ao5', 1);
INSERT INTO `categorias_campeonato` (`id_campeonato`, `id_categoria`, `formato`, `qtd_rounds`) VALUES (2, 3, 'ao5', 3);
INSERT INTO `categorias_campeonato` (`id_campeonato`, `id_categoria`, `formato`, `qtd_rounds`) VALUES (2, 2, 'ao5', 2);
INSERT INTO `categorias_campeonato` (`id_campeonato`, `id_categoria`, `formato`, `qtd_rounds`) VALUES (2, 4, 'ao5', 1);
INSERT INTO `categorias_campeonato` (`id_campeonato`, `id_categoria`, `formato`, `qtd_rounds`) VALUES (2, 13, 'bo3', 1);
INSERT INTO `categorias_campeonato` (`id_campeonato`, `id_categoria`, `formato`, `qtd_rounds`) VALUES (2, 11, 'ao5', 2);
INSERT INTO `categorias_campeonato` (`id_campeonato`, `id_categoria`, `formato`, `qtd_rounds`) VALUES (2, 8, 'ao5', 1);
INSERT INTO `categorias_campeonato` (`id_campeonato`, `id_categoria`, `formato`, `qtd_rounds`) VALUES (2, 10, 'ao5', 2);
INSERT INTO `categorias_campeonato` (`id_campeonato`, `id_categoria`, `formato`, `qtd_rounds`) VALUES (2, 1, 'ao5', 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `round`
-- -----------------------------------------------------
START TRANSACTION;
USE `cubing-comp`;
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (1, 3, 1, 1, '11.90', '11.00', '11.76', '9.05', '16.83', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (1, 3, 1, 2, '0', '13.66', '12.22', '13.67', '18.41', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (1, 3, 1, 3, '13.77', '9.26', '12.54', '11.66', '12.47', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (1, 2, 1, 1, '5.90', '5.19', '6.62', '4.71', '7.32', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (1, 2, 1, 2, '7.03', '5.42', '5.72', '3.45', '5.62', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (1, 4, 1, 1, '45.69', '50.14', '43.41', '50.77', '57.32', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (1, 5, 1, 1, '00:02:15.19', '00:02:12.71', '00:02:17.63', '00:01:56.49', '00:02:14.58', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (1, 8, 1, 1, '00:01:03.61', '00:01:03.22', '59.07', '00:01:02.25', '58.30', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (1, 9, 1, 1, '9.00', '7.78', '10.47', '13.29', '11.12', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (1, 10, 1, 1, '7.21', '12.20', '5.81', '5.77', '6.01', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (1, 1, 1, 1, '28.96', '24.19', '24.86', '25.99', '27.89', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 3, 1, 1, '12.65', '15.26', '14.44', '12.77', '13.29', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 3, 1, 2, '12.93', '14.70', '16.22', '12.41', '13.96', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 3, 1, 3, '11.32', '15.32', '13.74', '12.54', '14.06', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 2, 1, 1, '4.16', '5.27', '6.81', '4.20', '5.00', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 2, 1, 2, '6.19', '7.92', '4.67', '3.43', '5.63', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 4, 1, 1, '49.05', '56.58', '55.47', '50.23', '59.17', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 11, 1, 1, '30.12', '29.12', '24.13', '26.06', '29.06', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 11, 1, 2, '28.32', '34.75', '36.82', '30.10', '30.43', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 8, 1, 1, '00:01:00.28', '59.73', '00:01:11.03', '00:01:02.23', '00:01:01.09', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 10, 1, 1, '4.26', '5.73', '6.32', '9.11', '5.92', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 10, 1, 2, '8.71', '7.49', '8.35', '5.20', '5.37', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 1, 1, 1, '25.34', '22.92', '35.36', '25.70', '38.23', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 3, 2, 1, '23.58', '16.91', '25.69', '15.35', '21.83', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 3, 2, 2, '20.69', '21.85', '20.61', '22.43', '20.16', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 3, 2, 3, '18.66', '26.03', '27.31', '25.97', '26.53', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 2, 2, 1, '9.00', '7.39', '9.68', '8.25', '6.04', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 2, 2, 2, '7.54', '5.17', '8.27', '16.12', '5.17', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 4, 2, 1, '00:01:15.23', '00:01:35.44', '00:01:17.61', '00:01:13.66', '00:01:35.43', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 11, 2, 1, '50.42', '36.61', '37.31', '49.05', '44.08', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 11, 2, 2, '46.45', '56.03', '47.50', '0', '59.74', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 8, 2, 1, '00:03:10.64', '00:02:56.36', '00:03:05.40', '00:02:58.78', '00:03:07.69', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 10, 2, 1, '16.29', '12.18', '14.60', '16.14', '10.14', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 10, 2, 2, '9.15', '11.85', '9.47', '19.65', '12.52', NULL, NULL);
INSERT INTO `round` (`id_campeonato`, `id_categoria`, `id_competidor`, `num_round`, `tempo1`, `tempo2`, `tempo3`, `tempo4`, `tempo5`, `media`, `melhor`) VALUES (2, 1, 2, 1, '00:01:21.02', '00:01:39.45', '00:01:33.42', '00:02:37.71', '00:01:08.45', NULL, NULL);

COMMIT;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
